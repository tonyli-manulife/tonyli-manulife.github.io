<html>
<body>
  <input id="one-time-code" type="text" autocomplete="one-time-code" />
  <input id="2" type="text" />
  <script>
    const dom = document.getElementById('one-time-code')

    const descriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, 'value')
    const originalSet = descriptor.set
    descriptor.set = function(value) {
      console.log('Value set', this, value)
      this.changeValueCallback && this.changeValueCallback('set', value)
      originalSet.apply(this, arguments);
    }
    Object.defineProperty(HTMLInputElement.prototype, 'value', descriptor)

    function change(type, value) {
      console.log(type, value)
    }

    dom.addEventListener('change', (e) => {
      change('change:', e.target.value)
    })

    dom.addEventListener('input', (e) => {
      change('input:', e.target.value)
    })
    dom.changeValueCallback = change
  </script>
</body>
</html>
